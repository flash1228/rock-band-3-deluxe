{push_back $dx_settings_main
   (dxState_GraphicsWarn
      (view
         overshell_continue
         overshell_cancel
      )
      (enter
         {handle
            ($this set_confirm_actions postfx_warning (overshell_continue overshell_cancel))})
      (select
         (overshell_continue
            {leave_dx_settings}
            {$this leave_options}
            {overshell update_all}
            {if {session_mgr is_local}
               {ui sync_screen meta_loading_main_screen 0}
            }
         )
         (overshell_cancel
            {dx_state dxState_Graphics}
         )
      )
      (cancel {dx_state dxState_Graphics})
   )
}

{push_back $dx_settings_main
   (dxState_60FPSWarn
      (view
         overshell_continue
         overshell_cancel
      )
      (enter
         {handle
            ($this set_confirm_actions 60fps_warning (overshell_continue overshell_cancel))})
      (select
         (overshell_continue
            {set $dx_60fps {! $dx_60fps}}
            {if $dx_60fps
               {set $post_proc_needs_reset TRUE}
            }
            {dx_postfx_setter}
            {if_else $dx_60fps
               {set $emulatefps 60}
               {set $emulatefps 30}
            }
            {leave_dx_settings}
            {$this leave_options}
            {overshell update_all}
            {if {session_mgr is_local}
               {ui sync_screen meta_loading_main_screen 0}
            }
         )
         (overshell_cancel
            {dx_state dxState_Graphics}
         )
      )
      (cancel
         {dx_state dxState_Graphics}
      )
   )
}

{push_back $dx_settings_main
   (dxState_HighLODWarn
      (view
         overshell_continue
         overshell_cancel
      )
      (enter
         {handle
            ($this set_confirm_actions highlod_warning (overshell_continue overshell_cancel))})
      (select
         (overshell_continue
            {set $dx_force_lod {! $dx_force_lod}}
            {if $dx_force_lod
               {set $post_proc_needs_reset TRUE}
            }
            {dx_postfx_setter}
            {leave_dx_settings}
            {$this leave_options}
            {overshell update_all}
            {if {session_mgr is_local}
               {ui sync_screen meta_loading_main_screen 0}
            }
         )
         (overshell_cancel
            {dx_state dxState_Graphics}
         )
      )
      (cancel
         {dx_state dxState_Graphics}
      )
   )
}

{push_back $dx_settings_main
   (dxState_AutoPlayWarn
      (view
         overshell_continue
         overshell_cancel
      )
      (enter
         {handle
            ($this set_confirm_actions autoplay_warning (overshell_continue overshell_cancel))})
      (select
         (overshell_continue
            {modifier_mgr toggle_modifier_enabled mod_auto_play}
            {set $gotcha FALSE}
            {saveload_mgr disable_autosave $user}
            {dx_passive_messenger saving_disabled}
            {leave_dx_settings}
            {$this leave_options}
            {overshell update_all}
            {if {session_mgr is_local}
               {ui sync_screen meta_loading_main_screen 0}
            }
         )
         (overshell_cancel {leave_dx_settings} {$this show_modifiers})
      )
      (cancel
         {leave_dx_settings} {$this show_modifiers}
      )
   )
}

{push_back $dx_settings_main
   (dxState_TrackAngleSliderMsg
      (view
         overshell_continue
         overshell_cancel
      )
      (enter
         {handle
            ($this set_confirm_message
               {switch $dx_multiangle 
                  (1 {sprintf {localize os_angleset1} {int {+ {* -16.66 $dx_multiangle} 116.66}}})
                  (2 {sprintf {localize os_angleset2} {int {+ {* -16.66 $dx_multiangle} 116.66}}})
                  (3 {sprintf {localize os_angleset3} {int {+ {* -16.66 $dx_multiangle} 116.66}}})
                  (4 {sprintf {localize os_angleset4} {int {+ {* -16.66 $dx_multiangle} 116.66}}})
                  {sprintf {localize os_angleset} {int {+ {* -16.66 $dx_multiangle} 116.66}}}
               }
            )
         }
      )
      (select
         (overshell_confirm_ok {dx_state dxState_AngleMenu})
      )
   )
}

{push_back $dx_settings_main
   (dxState_SettingsWarn
      (view overshell_continue overshell_cancel)
      (enter {handle ($this set_confirm_actions settings_warning (overshell_continue))})
      (select (overshell_continue {leave_dx_settings} {$this show_modifiers}))
      (cancel {leave_dx_settings} {$this show_modifiers})
   )
}

{push_back $dx_settings_main
   (dxState_SaveWarn
      (view overshell_continue overshell_cancel)
      (enter {handle ($this set_confirm_actions save_warning (os_save os_dontsave))})
      (select
         (os_save
            {if_else $dx_settings_error
               {dx_state dxState_SaveWarnError}
               {do
                  {dx_settings_dta_writer}
                  {leave_dx_settings}
                  {$this show_game_options}
               }
            }
         )
         (os_dontsave {leave_dx_settings} {$this show_game_options})
      )
      (cancel {leave_dx_settings} {$this show_game_options})
   )
}

{push_back $dx_settings_main
   (dxState_ThemeOverwriteWarn
      (view overshell_continue overshell_cancel)
      (enter {handle ($this set_confirm_actions track_theme_overwrite_warning (os_overwrite os_dontsave))})
      (select
         (os_overwrite
            {if_else $dx_settings_error
               {dx_state dxState_SaveWarnError}
               {if_else {== $dx_track_theme_name default}
                  {dx_passive_messenger os_dont_overwrite_default}
                  {do
                     {dx_track_theme_dta_writer}
                     {dx_state dxState_TrackThemeLoader}
                  }
               }
            }
         )
         (os_dontsave {dx_state dxState_TrackThemeLoader})
      )
      (cancel {dx_state dxState_TrackThemeLoader})
   )
}

{push_back $dx_settings_main
   (dxState_TrackThemeWarn
      (view overshell_continue overshell_cancel)
      (enter {handle ($this set_confirm_actions theme_save_warning (os_save os_dontsave))})
      (select
         (os_save
            {if_else $dx_settings_error
               {dx_state dxState_ThemeSaveWarnError}
               {do
                  {set $dx_track_theme_name $text}
                  {dx_track_theme_dta_writer}
                  {dx_state dxState_TrackThemeLoader}
               }
            }
         )
         (os_dontsave {dx_state dxState_AppearanceMenu})
      )
      (cancel {dx_state dxState_AppearanceMenu})
   )
}

{push_back $dx_settings_main
   (dxState_SaveWarnError
      (view overshell_continue overshell_cancel)
      (enter {handle ($this set_confirm_actions settings_error (overshell_continue))})
      (select (overshell_continue {leave_dx_settings} {$this show_game_options}))
      (cancel {leave_dx_settings} {$this show_game_options})
   )
}

{push_back $dx_settings_main
   (dxState_ThemeSaveWarnError
      (view overshell_continue overshell_cancel)
      (enter {handle ($this set_confirm_actions settings_error (overshell_continue))})
      (select (overshell_continue {dx_state dxState_AppearanceMenu}))
      (cancel {dx_state dxState_AppearanceMenu})
   )
}

{push_back $dx_settings_main
   (dxState_SaveWarnErrorAV
      (view overshell_continue overshell_cancel)
      (enter {handle ($this set_confirm_actions settings_error (overshell_continue))})
      (select (overshell_continue {leave_dx_settings} {$this show_options_av_settings}))
      (cancel {leave_dx_settings} {$this show_options_av_settings})
   )
}

{push_back $dx_settings_main
   (dxState_SettingsSave
      (view overshell_continue overshell_cancel)
      (enter {handle ($this set_confirm_actions settings_save (overshell_continue))})
      (select (overshell_continue {dx_state dxState_DeluxeSettings}))
      (cancel {dx_state dxState_DeluxeSettings})
   )
}

{push_back $dx_settings_main
   (dxState_SettingsSaveError
      (view overshell_continue overshell_cancel)
      (enter {handle ($this set_confirm_actions settings_error (overshell_continue))})
      (select (overshell_continue {dx_state dxState_DeluxeSettings}))
      (cancel {dx_state dxState_DeluxeSettings})
   )
}

{push_back $dx_settings_main
   (dxState_PostFXWarn
      (view overshell_continue overshell_cancel)
      (enter {handle ($this set_confirm_actions postfx_warning (overshell_continue overshell_cancel))})
      (select
         (overshell_continue
            {leave_dx_settings}
            {$this leave_options}
            {overshell update_all}
            {if {session_mgr is_local}
               {ui sync_screen meta_loading_main_screen 0}
            }
         )
         (overshell_cancel {dx_state dxState_PostFX})
      )
      (cancel {dx_state dxState_PostFX})
   )
}

{push_back $dx_settings_main
   (dxState_CustomizerWarn
      (view overshell_continue overshell_cancel)
      (enter {handle ($this set_confirm_actions customizer_warn (overshell_continue overshell_cancel))})
      (select
         (overshell_continue
            ;{ui_event_mgr trigger_event error_message
            ;   (dummy init {symbol "You are being taken to the in game Theme Customizer. In this mode you will be able to see your theme settings reflected in real time. You will not be able to play the game or leave until you specifically click 'Leave Customizer'. To begin, click continue and pause the game when the song has started."})
            ;}
            {set $dx_customizer TRUE}
            {set $dx_moved_once FALSE}
            {session disconnect}
            {session_mgr disconnect}
            {leave_dx_settings}
            {$this leave_options}
            {overshell update_all}
            ;{overshell set_active_status kOvershellInactive}
            {set $rb3_songlist
               (
                  20thcenturyboy 25or6to4 antibodies beastandtheharlot beencaughtstealing
                  beforeiforget bohemianrhapsody breakonthrough caughtinamosh centerfold
                  chinagrove coldasice combatbaby crazytrain crosstowntraffic deadendfriends
                  dontburyme dontstandsoclosetome duhast everybodywantstorule falsealarm flylikeaneagle
                  foolin freebird getfree getupstandup goodvibrationslive heartofglass hereigoagain
                  heymanniceshot humanoid icanseeformiles ifeelgoodalt iloverocknroll imagine inabigcountry
                  ineedtoknow inthemeantime iwannabesedated jerrywasaracecar justlikeheaven killingloneliness
                  kinggeorge lasso lastdance livinginamerica llama lowrider meenamora midlifecrisis
                  miserybusiness2 needyoutonight nooneknows ohmygod onearmedscissors outerspacemuffs
                  oyemiamor plush portionsforfoxes radarlove rainbowinthedark rehab rocklobster roundabout
                  saturdaynightsalright sisterchristian smokeonthewater somethingbigger spaceoddity
                  stopmeifyouthink thebeautifulpeople thecon thehardestbutton thekillingmoon thelook
                  thepoweroflove thisbastardslife vivalaresistance walkinonthesun walkoflife
                  werewolvesoflondon whipit yoshimibattles
               )
            }
            {meta_performer set_song {random_elem $rb3_songlist}}
            {gamemode set_mode qp_coop}
            {ui sync_screen {music_library get_next_screen} 0}
         )
         (overshell_cancel {dx_state dxState_TextureMenu})
      )
      (cancel {dx_state dxState_TextureMenu})
   )
}

{push_back $dx_settings_main
   (dxState_FakeJukeWarn
      (view overshell_continue overshell_cancel)
      (enter {handle ($this set_confirm_actions fakejuke_warning (overshell_continue overshell_cancel))})
      (select
         (overshell_continue
            {set $dx_dont_save_mod TRUE}
            {enable_modifier mod_auto_play}
            {enable_modifier mod_nohud}
            {enable_modifier mod_nopause}
            {enable_modifier mod_fakejuke}
            {enable_modifier mod_dx_no_overdrive}
            {set $dx_mtv_visibility default}
            {set $dx_mtv_line_bpm FALSE}
            {disable_modifier mod_drum_fills}
            {set $dx_venue_intro FALSE}
            {set $gotcha FALSE}
            {saveload_mgr disable_autosave $user}
            {dx_passive_messenger saving_disabled}
            {leave_dx_settings}
            {$this leave_options}
            {overshell update_all}
            {if {session_mgr is_local}
               {ui sync_screen meta_loading_main_screen 0}
            }
         )
         (overshell_cancel {leave_dx_settings} {$this show_modifiers})
      )
      (cancel {leave_dx_settings} {$this show_modifiers})
   )
}

{push_back $dx_settings_main
   (dxState_CHModeWarn
      (view overshell_continue overshell_cancel)
      (enter {handle ($this set_confirm_actions chmode_warning (overshell_continue overshell_cancel))})
      (select
         (overshell_continue
            {modifier_mgr toggle_modifier_enabled mod_chmode}
            {set $dx_rails_needs_reset FALSE}
            {set $gotcha FALSE}
            {saveload_mgr disable_autosave $user}
            {dx_passive_messenger saving_disabled}
            {disable_modifier mod_calibration}
            {disable_modifier mod_precision}
            {leave_dx_settings}
            {$this leave_options}
            {overshell update_all}
            {if {session_mgr is_local}
               {ui sync_screen meta_loading_main_screen 0}
            }
         )
         (overshell_cancel {leave_dx_settings} {$this show_modifiers})
      )
      (cancel {leave_dx_settings} {$this show_modifiers})
   )
}

{push_back $dx_settings_main
   (dxState_BrutalWarn
      (view overshell_continue overshell_cancel)
      (enter {handle ($this set_confirm_actions brutal_warning (overshell_continue overshell_cancel))})
      (select
         (overshell_continue
            {modifier_mgr toggle_modifier_enabled mod_brutalmode}
            {set $dx_stars_needs_reset TRUE}
            {set $dx_multiplier_ring_needs_reset TRUE}
            {leave_dx_settings}
            {$this leave_options}
            {overshell update_all}
            {if {session_mgr is_local}
               {ui sync_screen meta_loading_main_screen 0}
            }
         )
         (overshell_cancel {leave_dx_settings} {$this show_modifiers})
      )
      (cancel {leave_dx_settings} {$this show_modifiers})
   )
}

{push_back $dx_settings_main
   (dxState_CalibrationWarn
      (view overshell_continue overshell_cancel)
      (enter {handle ($this set_confirm_actions calibration_warning (overshell_continue overshell_cancel))})
      (select
         (overshell_continue
            {modifier_mgr toggle_modifier_enabled mod_calibration}
            {disable_modifier mod_precision}
            {disable_modifier mod_chmode}
            {leave_dx_settings}
            {$this leave_options}
            {overshell update_all}
            {if {session_mgr is_local}
               {ui sync_screen meta_loading_main_screen 0}
            }
         )
         (overshell_cancel {leave_dx_settings} {$this show_modifiers})
      )
      (cancel {leave_dx_settings} {$this show_modifiers})
   )
}

{push_back $dx_settings_main
   (dxState_PrecisionWarn
      (view overshell_continue overshell_cancel)
      (enter {handle ($this set_confirm_actions precision_warning (overshell_continue overshell_cancel))})
      (select
         (overshell_continue
            {modifier_mgr toggle_modifier_enabled mod_precision}
            {set $dx_rails_needs_reset FALSE}
            {disable_modifier mod_calibration}
            {disable_modifier mod_chmode}
            {leave_dx_settings}
            {$this leave_options}
            {overshell update_all}
            {if {session_mgr is_local}
               {ui sync_screen meta_loading_main_screen 0}
            }
         )
         (overshell_cancel {leave_dx_settings} {$this show_modifiers})
      )
      (cancel {leave_dx_settings} {$this show_modifiers})
   )
}

{push_back $dx_settings_main
   (dxState_RebootThemeWarn
      (view overshell_continue overshell_cancel)
      (enter
         {handle
            ($this set_confirm_actions
               #ifdef RB3E
               reboot_theme_warning_rb3e
               #else
               reboot_theme_warning
               #endif
               (#ifdef RB3E overshell_reboot #else overshell_continue #endif overshell_cancel)
            )
         }
      )
      (select
         (overshell_continue
            {dx_settings_dta_writer}
            {dx_state dxState_TrackThemeLoader}
         )
         (overshell_reboot
            {dx_settings_dta_writer}
            #ifdef RB3E {rb3e_relaunch_game} #endif
         )
         (overshell_cancel {dx_state dxState_TrackThemeLoader})
      )
      (cancel {dx_state dxState_TrackThemeLoader})
   )
}

{push_back $dx_settings_main
   (dxState_RebootWarn
      (view overshell_continue overshell_cancel)
      (enter {handle ($this set_confirm_actions reboot_warning (overshell_continue overshell_cancel))})
      (select
         (overshell_continue {rb3e_relaunch_game})
         (overshell_cancel {dx_state dxState_DeluxeSettings})
      )
      (cancel {dx_state dxState_DeluxeSettings})
   )
}

{push_back $dx_settings_main
   (dxState_RebootWarn
      (view overshell_continue overshell_cancel)
      (enter {handle ($this set_confirm_actions debug_warning (os_iunderstand os_takemeback))})
      (select
         (os_iunderstand
            {dx_state dxState_Debug}
            {set $dx_debug_first FALSE}
         )
         (os_takemeback {dx_state dxState_Advanced})
      )
      (cancel {dx_state dxState_Advanced})
   )
}

{push_back $dx_settings_main
   (dxState_ModifierSongLoad
      (view overshell_continue overshell_cancel)
      (enter {handle ($this set_confirm_actions debug_warning (overshell_confirm_yes overshell_confirm_no))})
      (select
         (overshell_confirm_yes
            {leave_dx_settings}
            {$this leave_options}
            {overshell update_all}
            {if {session_mgr is_local}
               {ui sync_screen meta_loading_main_screen 0}
            }
         )
         (overshell_confirm_no {leave_dx_settings} {$this show_modifiers})
      )
      (cancel {leave_dx_settings} {$this show_modifiers})
   )
}

{push_back $dx_settings_main
   (dxState_MenuBGWarn
      (view overshell_continue overshell_cancel)
      (enter {handle ($this set_confirm_actions os_bgwarn (overshell_continue))})
      (select
         (overshell_continue
            {set $fpsslider FALSE}
            {dx_state dxState_MenuBG}
         )
      )
      (cancel
         {set $fpsslider FALSE}
         {dx_state dxState_MenuBG}
      )
   )
}

{push_back $dx_settings_main
   (dxState_ReloadDenyMsg
      (view overshell_continue overshell_cancel)
      (enter {handle ($this set_confirm_actions os_reload_deny (overshell_continue))})
      (select (overshell_continue {dx_state dxState_CameraMenu}))
      (cancel {dx_state dxState_CameraMenu})
   )
}

{push_back $dx_settings_main
   (dxState_HimemWarn
      (view overshell_continue overshell_cancel)
      (enter
         {handle ($this set_confirm_actions himem_warning (overshell_continue overshell_cancel))}
         {confirm_action.lst set_selected 1}
      )
      (select
         (overshell_continue
            {set $dx_write_hi_mem TRUE}
            {dx_state dxState_Debug}
         )
         (overshell_cancel {dx_state dxState_Debug})
      )
      (cancel {dx_state dxState_DeluxeSettings})
   )
}

{push_back $dx_settings_main
   (dxState_ShadingMenuWarning
      (view overshell_continue overshell_cancel)
      (enter {handle ($this set_confirm_actions os_bgwarn (overshell_continue))})
      (select (overshell_continue {dx_state dxState_ShadingMenu}))
      (cancel {dx_state dxState_ShadingMenu})
   )
}

{push_back $dx_settings_main
   (dxState_colorrSliderMsg
      (view overshell_continue overshell_cancel)
      (enter
         {handle
            ($this set_confirm_actions {sprint {localize color_msg} " " $dx_set_ui_rgb_r  ", " $dx_set_ui_rgb_g ", " $dx_set_ui_rgb_b} (overshell_continue))})
      (select
         (overshell_continue
            {set $colorrslider FALSE}
            {dx_state dxState_rgbcolormenu}
         )
      )
      (cancel
         {set $colorrslider FALSE}
         {dx_state dxState_rgbcolormenu}
      )
   )
}

{push_back $dx_settings_main
   (dxState_colorgSliderMsg
      (view overshell_continue overshell_cancel)
      (enter
         {handle
            ($this set_confirm_actions {sprint {localize color_msg} " " $dx_set_ui_rgb_r  ", " $dx_set_ui_rgb_g ", " $dx_set_ui_rgb_b} (overshell_continue))})
      (select
         (overshell_continue
            {set $colorrslider FALSE}
            {dx_state dxState_rgbcolormenu}
         )
      )
      (cancel
         {set $colorrslider FALSE}
         {dx_state dxState_rgbcolormenu}
      )
   )
}

{push_back $dx_settings_main
   (dxState_colorbSliderMsg
      (view overshell_continue overshell_cancel)
      (enter
         {handle
            ($this set_confirm_actions {sprint {localize color_msg} " " $dx_set_ui_rgb_r  ", " $dx_set_ui_rgb_g ", " $dx_set_ui_rgb_b} (overshell_continue))})
      (select
         (overshell_continue
            {set $colorrslider FALSE}
            {dx_state dxState_rgbcolormenu}
         )
      )
      (cancel
         {set $colorrslider FALSE}
         {dx_state dxState_rgbcolormenu}
      )
   )
}